@using DAL.Model
@using Domain.ProfileSettings
@using WebApp.Controllers
@using WebApp.Model.Forms
@using WebApp.Model.TableRenders.Renders
@using WebApp.Views.ProfileSettings

@{
    var descriptor = FormBuilder<DeliveryAddressDomain>.CreateNew((bool)ViewData[ProfileSettingsController.Mode])
        .AddItem(x => x.Name)
        .AddItem(x => x.StreetAndNumber)
        .AddItem(x => x.PostalCode)
        .AddItem(x => x.City)
        .AddItem(x => x.Country , new FormItemOptions
        {
            ColumnRenderer = new ValueObjectRenderer<Country>()
        })
        .Build();

    var context = new AjaxFormContext
    {
        FormDescriptor = descriptor,
        ActionName = nameof(ProfileSettingsController.DeliveryAddressSettings)
    };

    var viewData = new ViewDataDictionary(ViewData)
    {
        new KeyValuePair<string, object>(AjaxFormContext.Name, context)
    };
}

<partial name="_CommonAjaxForm", model="@Model" view-data="@viewData"/>